# æµ‹è¯•ç­–ç•¥å’ŒéªŒè¯æ–¹æ¡ˆ

## ğŸ¯ æµ‹è¯•ç›®æ ‡

åŸºäºä½ åå¥½ä½¿ç”¨ n8n è¿›è¡Œé›†æˆæµ‹è¯•çš„æ–¹å¼ï¼Œåˆ¶å®šå…¨é¢çš„æµ‹è¯•ç­–ç•¥ï¼Œç¡®ä¿ MCP å·¥å…·åŒ…çš„å„é¡¹åŠŸèƒ½åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­çš„å¯é æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚

## ğŸ—ï¸ æµ‹è¯•æ¶æ„è®¾è®¡

### æµ‹è¯•å±‚æ¬¡ç»“æ„
```mermaid
graph TB
    subgraph "n8n é›†æˆæµ‹è¯•å±‚"
        A[åŠŸèƒ½éªŒè¯æµ‹è¯•]
        B[å·¥ä½œæµé›†æˆæµ‹è¯•]
        C[æ€§èƒ½å‹åŠ›æµ‹è¯•]
        D[ç”¨æˆ·åœºæ™¯æµ‹è¯•]
    end

    subgraph "å·¥å…·å•å…ƒæµ‹è¯•å±‚"
        E[å·¥å…·æ¥å£æµ‹è¯•]
        F[å‚æ•°éªŒè¯æµ‹è¯•]
        G[é”™è¯¯å¤„ç†æµ‹è¯•]
        H[è¾¹ç•Œæ¡ä»¶æµ‹è¯•]
    end

    subgraph "ç³»ç»Ÿé›†æˆæµ‹è¯•å±‚"
        I[ChromaDB é›†æˆæµ‹è¯•]
        J[å·¥å…·åä½œæµ‹è¯•]
        K[çŠ¶æ€ç®¡ç†æµ‹è¯•]
        L[èµ„æºç®¡ç†æµ‹è¯•]
    end

    subgraph "ç«¯åˆ°ç«¯æµ‹è¯•å±‚"
        M[å®Œæ•´å¼€å‘æµç¨‹æµ‹è¯•]
        N[å¤šé¡¹ç›®å¹¶å‘æµ‹è¯•]
        O[é•¿æœŸè¿è¡Œç¨³å®šæ€§æµ‹è¯•]
        P[æ•…éšœæ¢å¤æµ‹è¯•]
    end

    A --> E
    B --> F
    C --> G
    D --> H

    E --> I
    F --> J
    G --> K
    H --> L

    I --> M
    J --> N
    K --> O
    L --> P
```

## ğŸ”§ n8n é›†æˆæµ‹è¯•ç­–ç•¥

### 1. Git é›†æˆå·¥å…·æµ‹è¯•

#### æµ‹è¯•åœºæ™¯è®¾è®¡
```json
{
    "test_name": "Git ç²¾ç¡®æ–‡ä»¶ä¿®æ”¹æµ‹è¯•",
    "description": "éªŒè¯ Git å·¥å…·çš„ç²¾ç¡®æ–‡ä»¶ä¿®æ”¹èƒ½åŠ›",
    "n8n_workflow": {
        "nodes": [
            {
                "name": "åˆ›å»ºæµ‹è¯•æ–‡ä»¶",
                "type": "MCP Tool",
                "tool": "write_file",
                "parameters": {
                    "file_path": "test_project/src/main.py",
                    "content": "def hello_world():\n    print('Hello, World!')\n\nif __name__ == '__main__':\n    hello_world()"
                }
            },
            {
                "name": "åˆ†ææ–‡ä»¶å·®å¼‚",
                "type": "MCP Tool",
                "tool": "git_diff_analysis",
                "parameters": {
                    "target": "test_project/src/main.py",
                    "analysis_level": "semantic"
                }
            },
            {
                "name": "åº”ç”¨ç²¾ç¡®è¡¥ä¸",
                "type": "MCP Tool",
                "tool": "git_apply_patch",
                "parameters": {
                    "file_path": "test_project/src/main.py",
                    "patch_operations": [
                        {
                            "operation": "replace",
                            "line_number": 2,
                            "content": "    print('Hello, Enhanced World!')"
                        }
                    ]
                }
            },
            {
                "name": "éªŒè¯ä¿®æ”¹ç»“æœ",
                "type": "MCP Tool",
                "tool": "read_file",
                "parameters": {
                    "file_path": "test_project/src/main.py"
                }
            }
        ]
    },
    "expected_results": {
        "diff_analysis": {
            "files_changed": 1,
            "semantic_impact": "function_content_change"
        },
        "patch_application": {
            "success": true,
            "lines_modified": 1
        },
        "final_content": "def hello_world():\n    print('Hello, Enhanced World!')\n\nif __name__ == '__main__':\n    hello_world()"
    }
}
```

#### n8n æµ‹è¯•æŒ‡ä»¤
```markdown
# Git é›†æˆå·¥å…·æµ‹è¯•æŒ‡ä»¤

## æµ‹è¯• 1ï¼šåŸºç¡€ diff åˆ†æ
è¯·åœ¨ n8n ä¸­åˆ›å»ºå·¥ä½œæµï¼Œæµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š
1. åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªå‡½æ•°çš„ Python æ–‡ä»¶
2. ä½¿ç”¨ `git_diff_analysis` å·¥å…·åˆ†ææ–‡ä»¶ç»“æ„
3. éªŒè¯å·¥å…·èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å‡½æ•°ã€ç±»å’Œå¯¼å…¥è¯­å¥

## æµ‹è¯• 2ï¼šç²¾ç¡®è¡¥ä¸åº”ç”¨
1. ä½¿ç”¨ `git_apply_patch` å·¥å…·ä¿®æ”¹ç‰¹å®šè¡Œçš„å†…å®¹
2. éªŒè¯åªæœ‰æŒ‡å®šè¡Œè¢«ä¿®æ”¹ï¼Œå…¶ä»–å†…å®¹ä¿æŒä¸å˜
3. æµ‹è¯•å¤šä¸ªè¡¥ä¸æ“ä½œçš„æ‰¹é‡åº”ç”¨

## æµ‹è¯• 3ï¼šå†²çªæ£€æµ‹å’Œå¤„ç†
1. åˆ›å»ºå¯èƒ½äº§ç”Ÿå†²çªçš„ä¿®æ”¹åœºæ™¯
2. ä½¿ç”¨ `git_conflict_check` å·¥å…·æ£€æµ‹æ½œåœ¨å†²çª
3. éªŒè¯å†²çªè§£å†³å»ºè®®çš„å‡†ç¡®æ€§
```

### 2. ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿæµ‹è¯•

#### æµ‹è¯•å·¥ä½œæµè®¾è®¡
```json
{
    "test_name": "ç‰ˆæœ¬ç®¡ç†æ’¤é”€å›æ»šæµ‹è¯•",
    "n8n_workflow": {
        "nodes": [
            {
                "name": "åˆ›å»ºæ£€æŸ¥ç‚¹",
                "type": "MCP Tool",
                "tool": "manage_checkpoint",
                "parameters": {
                    "action": "create",
                    "checkpoint_name": "before_modifications",
                    "description": "æµ‹è¯•ä¿®æ”¹å‰çš„æ£€æŸ¥ç‚¹"
                }
            },
            {
                "name": "æ‰§è¡Œå¤šä¸ªä¿®æ”¹",
                "type": "Loop",
                "items": [
                    {"tool": "write_file", "params": {"file_path": "test1.py", "content": "# Test 1"}},
                    {"tool": "write_file", "params": {"file_path": "test2.py", "content": "# Test 2"}},
                    {"tool": "write_file", "params": {"file_path": "test3.py", "content": "# Test 3"}}
                ]
            },
            {
                "name": "æ’¤é”€æœ€åä¸¤ä¸ªæ“ä½œ",
                "type": "MCP Tool",
                "tool": "undo_operation",
                "parameters": {
                    "steps": 2,
                    "operation_type": "file_create"
                }
            },
            {
                "name": "éªŒè¯æ’¤é”€ç»“æœ",
                "type": "MCP Tool",
                "tool": "list_files",
                "parameters": {
                    "directory": "."
                }
            },
            {
                "name": "å›æ»šåˆ°æ£€æŸ¥ç‚¹",
                "type": "MCP Tool",
                "tool": "rollback_to_checkpoint",
                "parameters": {
                    "target": {"checkpoint_id": "before_modifications"}
                }
            }
        ]
    }
}
```

### 3. Agent è¡Œä¸ºè‡ªåŠ¨æœºæµ‹è¯•

#### çŠ¶æ€è½¬æ¢æµ‹è¯•
```markdown
# Agent è¡Œä¸ºè‡ªåŠ¨æœºæµ‹è¯•æŒ‡ä»¤

## æµ‹è¯•åœºæ™¯ï¼šå¤æ‚ä»»åŠ¡å¤„ç†æµç¨‹
1. ç»™ Agent ä¸€ä¸ªå¤æ‚çš„ä»£ç é‡æ„ä»»åŠ¡
2. è§‚å¯Ÿ Agent çš„çŠ¶æ€è½¬æ¢è¿‡ç¨‹ï¼š
   - TaskAnalysis â†’ Planning â†’ Execution â†’ Validation
3. éªŒè¯æ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸ
4. æµ‹è¯•å¼‚å¸¸æƒ…å†µä¸‹çš„é”™è¯¯å¤„ç†å’Œæ¢å¤

## éªŒè¯ç‚¹ï¼š
- çŠ¶æ€è½¬æ¢çš„é€»è¾‘æ­£ç¡®æ€§
- æ¯ä¸ªçŠ¶æ€ä¸‹çš„å†³ç­–ä¸€è‡´æ€§
- é”™è¯¯æ¢å¤çš„æœ‰æ•ˆæ€§
- å­¦ä¹ å’Œé€‚åº”çš„æ•ˆæœ
```

## ğŸ“Š æ€§èƒ½æµ‹è¯•ç­–ç•¥

### 1. å¤§å‹é¡¹ç›®å¤„ç†æµ‹è¯•

#### æµ‹è¯•é…ç½®
```json
{
    "test_name": "å¤§å‹é¡¹ç›®æ€§èƒ½æµ‹è¯•",
    "test_data": {
        "project_size": {
            "files_count": 1000,
            "total_lines": 50000,
            "languages": ["Python", "JavaScript", "TypeScript"]
        },
        "operations": [
            "é¡¹ç›®å…¨é‡åˆ†æ",
            "è·¨æ–‡ä»¶ä¾èµ–åˆ†æ",
            "è¯­ä¹‰æœç´¢æŸ¥è¯¢",
            "æ‰¹é‡æ–‡ä»¶ä¿®æ”¹"
        ]
    },
    "performance_targets": {
        "analysis_time": "< 30 seconds",
        "search_response": "< 2 seconds",
        "memory_usage": "< 1GB",
        "concurrent_operations": "> 10"
    }
}
```

### 2. å¹¶å‘å‹åŠ›æµ‹è¯•

#### n8n å¹¶å‘æµ‹è¯•å·¥ä½œæµ
```markdown
# å¹¶å‘å‹åŠ›æµ‹è¯•æŒ‡ä»¤

## æµ‹è¯•è®¾ç½®ï¼š
1. åœ¨ n8n ä¸­åˆ›å»º 10 ä¸ªå¹¶è¡Œåˆ†æ”¯
2. æ¯ä¸ªåˆ†æ”¯åŒæ—¶æ‰§è¡Œä¸åŒçš„ MCP å·¥å…·æ“ä½œ
3. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨å’Œå“åº”æ—¶é—´

## æµ‹è¯•æ“ä½œï¼š
- å¹¶å‘æ–‡ä»¶åˆ†æ
- å¹¶å‘ä»£ç æœç´¢
- å¹¶å‘ Git æ“ä½œ
- å¹¶å‘è®°å¿†æŸ¥è¯¢

## ç›‘æ§æŒ‡æ ‡ï¼š
- å“åº”æ—¶é—´åˆ†å¸ƒ
- é”™è¯¯ç‡ç»Ÿè®¡
- èµ„æºä½¿ç”¨å³°å€¼
- ç³»ç»Ÿç¨³å®šæ€§
```

## ğŸ” åŠŸèƒ½éªŒè¯æµ‹è¯•

### 1. ä¸Šä¸‹æ–‡å¼•æ“å¢å¼ºåŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹è®¾è®¡
```json
{
    "test_cases": [
        {
            "name": "è·¨æ–‡ä»¶ä¾èµ–åˆ†æ",
            "steps": [
                "åˆ›å»ºå¤šä¸ªç›¸äº’ä¾èµ–çš„ Python æ¨¡å—",
                "ä½¿ç”¨ analyze_call_graph åˆ†æè°ƒç”¨å…³ç³»",
                "éªŒè¯ä¾èµ–å›¾çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§"
            ],
            "validation": {
                "dependency_accuracy": "> 95%",
                "circular_dependency_detection": "100%",
                "performance": "< 5 seconds for 100 files"
            }
        },
        {
            "name": "æ™ºèƒ½é‡æ„å»ºè®®",
            "steps": [
                "æä¾›åŒ…å«ä»£ç å¼‚å‘³çš„ç¤ºä¾‹ä»£ç ",
                "ä½¿ç”¨ suggest_refactoring è·å–å»ºè®®",
                "éªŒè¯å»ºè®®çš„å‡†ç¡®æ€§å’Œå®ç”¨æ€§"
            ],
            "validation": {
                "suggestion_relevance": "> 80%",
                "safety_assessment": "å‡†ç¡®è¯†åˆ«é«˜é£é™©é‡æ„",
                "improvement_estimation": "åˆç†çš„æ•ˆæœé¢„ä¼°"
            }
        }
    ]
}
```

### 2. è®°å¿†ç³»ç»Ÿè¿›åŒ–åŠŸèƒ½æµ‹è¯•

#### å­¦ä¹ æ•ˆæœéªŒè¯
```markdown
# è®°å¿†ç³»ç»Ÿå­¦ä¹ æ•ˆæœæµ‹è¯•

## æµ‹è¯•æµç¨‹ï¼š
1. åˆå§‹åŒ–ç©ºç™½è®°å¿†ç³»ç»Ÿ
2. æ‰§è¡Œä¸€ç³»åˆ—å¼€å‘ä»»åŠ¡ï¼Œè®©ç³»ç»Ÿå­¦ä¹ 
3. é‡å¤ç›¸ä¼¼ä»»åŠ¡ï¼Œè§‚å¯Ÿç³»ç»Ÿçš„æ”¹è¿›

## éªŒè¯æŒ‡æ ‡ï¼š
- ä»»åŠ¡å®Œæˆæ•ˆç‡çš„æå‡
- é”™è¯¯ç‡çš„é™ä½
- ä¸ªæ€§åŒ–å»ºè®®çš„å‡†ç¡®æ€§
- è·¨ä¼šè¯è®°å¿†çš„ä¿æŒ

## n8n æµ‹è¯•å·¥ä½œæµï¼š
1. åˆ›å»ºå­¦ä¹ ä»»åŠ¡åºåˆ—
2. ç›‘æ§æ¯æ¬¡æ‰§è¡Œçš„æ€§èƒ½æŒ‡æ ‡
3. åˆ†æå­¦ä¹ æ›²çº¿å’Œæ”¹è¿›æ•ˆæœ
```

## ğŸ›¡ï¸ ç¨³å®šæ€§å’Œå¯é æ€§æµ‹è¯•

### 1. é•¿æœŸè¿è¡Œç¨³å®šæ€§æµ‹è¯•

#### æµ‹è¯•è®¾è®¡
```json
{
    "test_name": "7å¤©è¿ç»­è¿è¡Œæµ‹è¯•",
    "test_configuration": {
        "duration": "7 days",
        "operations_per_hour": 100,
        "concurrent_sessions": 5,
        "test_scenarios": [
            "ä»£ç åˆ†æå’Œä¿®æ”¹",
            "é¡¹ç›®æœç´¢å’ŒæŸ¥è¯¢",
            "è®°å¿†å­˜å‚¨å’Œæ£€ç´¢",
            "å·¥å…·åä½œæ‰§è¡Œ"
        ]
    },
    "monitoring_metrics": {
        "memory_leaks": "å†…å­˜ä½¿ç”¨è¶‹åŠ¿",
        "performance_degradation": "å“åº”æ—¶é—´å˜åŒ–",
        "error_accumulation": "é”™è¯¯ç‡ç»Ÿè®¡",
        "data_consistency": "æ•°æ®å®Œæ•´æ€§æ£€æŸ¥"
    }
}
```

### 2. æ•…éšœæ¢å¤æµ‹è¯•

#### æ•…éšœæ³¨å…¥æµ‹è¯•
```markdown
# æ•…éšœæ¢å¤èƒ½åŠ›æµ‹è¯•

## æ•…éšœç±»å‹ï¼š
1. ç½‘ç»œä¸­æ–­
2. ç£ç›˜ç©ºé—´ä¸è¶³
3. å†…å­˜è€—å°½
4. ChromaDB è¿æ¥å¤±è´¥
5. å·¥å…·æ‰§è¡Œè¶…æ—¶

## æµ‹è¯•æ–¹æ³•ï¼š
1. åœ¨ n8n å·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹ä¸­æ³¨å…¥æ•…éšœ
2. è§‚å¯Ÿç³»ç»Ÿçš„é”™è¯¯æ£€æµ‹å’Œæ¢å¤è¡Œä¸º
3. éªŒè¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§

## éªŒè¯æ ‡å‡†ï¼š
- æ•…éšœæ£€æµ‹æ—¶é—´ < 5 ç§’
- è‡ªåŠ¨æ¢å¤æˆåŠŸç‡ > 90%
- æ•°æ®ä¸¢å¤±ç‡ = 0%
- ç”¨æˆ·ä½“éªŒå½±å“æœ€å°åŒ–
```

## ğŸ“ˆ æµ‹è¯•è‡ªåŠ¨åŒ–å’ŒæŒç»­é›†æˆ

### 1. è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶

#### n8n æµ‹è¯•è‡ªåŠ¨åŒ–
```json
{
    "automation_framework": {
        "test_scheduler": "å®šæ—¶æ‰§è¡Œæµ‹è¯•å¥—ä»¶",
        "result_collection": "è‡ªåŠ¨æ”¶é›†æµ‹è¯•ç»“æœ",
        "performance_monitoring": "æŒç»­æ€§èƒ½ç›‘æ§",
        "alert_system": "å¼‚å¸¸æƒ…å†µå‘Šè­¦"
    },
    "test_categories": {
        "smoke_tests": "æ¯æ¬¡éƒ¨ç½²åçš„åŸºç¡€åŠŸèƒ½éªŒè¯",
        "regression_tests": "åŠŸèƒ½å›å½’æµ‹è¯•",
        "performance_tests": "æ€§èƒ½åŸºå‡†æµ‹è¯•",
        "integration_tests": "ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•"
    }
}
```

### 2. æµ‹è¯•ç»“æœåˆ†æå’ŒæŠ¥å‘Š

#### æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿
```markdown
# MCP å·¥å…·åŒ…æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è§ˆ
- æµ‹è¯•æ—¶é—´ï¼š{test_date}
- æµ‹è¯•ç‰ˆæœ¬ï¼š{version}
- æµ‹è¯•ç¯å¢ƒï¼š{environment}
- æ€»æµ‹è¯•ç”¨ä¾‹ï¼š{total_cases}
- é€šè¿‡ç‡ï¼š{pass_rate}%

## åŠŸèƒ½æµ‹è¯•ç»“æœ
### Git é›†æˆå·¥å…·
- diff åˆ†æå‡†ç¡®ç‡ï¼š{diff_accuracy}%
- patch åº”ç”¨æˆåŠŸç‡ï¼š{patch_success}%
- å†²çªæ£€æµ‹å‡†ç¡®ç‡ï¼š{conflict_detection}%

### ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ
- æ’¤é”€æ“ä½œæˆåŠŸç‡ï¼š{undo_success}%
- å›æ»šæ“ä½œæˆåŠŸç‡ï¼š{rollback_success}%
- æ£€æŸ¥ç‚¹ç®¡ç†å¯é æ€§ï¼š{checkpoint_reliability}%

## æ€§èƒ½æµ‹è¯•ç»“æœ
- å¹³å‡å“åº”æ—¶é—´ï¼š{avg_response_time}ms
- å¹¶å‘å¤„ç†èƒ½åŠ›ï¼š{concurrent_capacity}
- å†…å­˜ä½¿ç”¨å³°å€¼ï¼š{memory_peak}MB
- CPU ä½¿ç”¨ç‡ï¼š{cpu_usage}%

## é—®é¢˜å’Œå»ºè®®
{issues_and_recommendations}
```

## ğŸš€ æµ‹è¯•å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½æµ‹è¯• (1å‘¨)
- Git é›†æˆå·¥å…·çš„ n8n æµ‹è¯•éªŒè¯
- ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿçš„åŠŸèƒ½æµ‹è¯•
- åŸºç¡€æ€§èƒ½åŸºå‡†æµ‹è¯•

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½æµ‹è¯• (1å‘¨)
- Agent è¡Œä¸ºè‡ªåŠ¨æœºæµ‹è¯•
- ä¸Šä¸‹æ–‡å¼•æ“å¢å¼ºåŠŸèƒ½æµ‹è¯•
- è®°å¿†ç³»ç»Ÿå­¦ä¹ æ•ˆæœéªŒè¯

### ç¬¬ä¸‰é˜¶æ®µï¼šç³»ç»Ÿé›†æˆæµ‹è¯• (1å‘¨)
- ç«¯åˆ°ç«¯å·¥ä½œæµæµ‹è¯•
- é•¿æœŸç¨³å®šæ€§æµ‹è¯•
- æ•…éšœæ¢å¤èƒ½åŠ›æµ‹è¯•

### ç¬¬å››é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–æµ‹è¯• (1å‘¨)
- å¤§è§„æ¨¡é¡¹ç›®å¤„ç†æµ‹è¯•
- å¹¶å‘å‹åŠ›æµ‹è¯•
- èµ„æºä½¿ç”¨ä¼˜åŒ–éªŒè¯

è¿™ä¸ªæµ‹è¯•ç­–ç•¥å……åˆ†åˆ©ç”¨äº†ä½ åå¥½çš„ n8n æµ‹è¯•æ–¹å¼ï¼Œç¡®ä¿æ‰€æœ‰æ–°åŠŸèƒ½éƒ½èƒ½åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­å¾—åˆ°å……åˆ†éªŒè¯ã€‚
